<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Airbnb Travel Agent AI - Javier Rondon</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        .project-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem;
        }
        .project-header {
            margin-bottom: 2rem;
            text-align: center;
        }
        .project-header h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }
        .project-description {
            margin-bottom: 2rem;
            line-height: 1.6;
        }
        .project-iframe {
            width: 100%;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
        }
        .project-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }
        .detail-card {
            background-color: var(--card-bg);
            border-radius: 8px;
            padding: 1.5rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        }
        .detail-card h3 {
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
        }
        .detail-card h3 i {
            margin-right: 0.5rem;
            color: var(--primary-color);
        }
        .return-link {
            display: inline-flex;
            align-items: center;
            color: var(--primary-color);
            font-weight: 500;
            margin-top: 1rem;
            transition: all 0.3s ease;
        }
        .return-link i {
            margin-right: 0.5rem;
        }
        .return-link:hover {
            transform: translateX(-5px);
        }
        .features-container {
            margin: 3rem 0;
        }
        .features-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
            margin: 2rem 0;
        }
        
        /* Primera fila - contenedor flex para 3 elementos */
        .first-row {
            display: flex;
            justify-content: space-between;
            gap: 1.5rem;
        }
        
        .first-row .feature-card {
            flex: 1;
            width: calc(33.33% - 1rem);
        }
        
        /* Segunda fila - contenedor flex para 2 elementos centrados */
        .second-row {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin-top: 1rem;
        }
        
        .second-row .feature-card {
            flex: 0 0 30%;
            max-width: 30%;
        }
        
        .feature-card {
            background-color: var(--card-bg);
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease;
            display: flex;
            flex-direction: column;
        }
        .feature-card:hover {
            transform: translateY(-5px);
        }
        .feature-icon {
            font-size: 2.2rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }
        .feature-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 0.8rem;
        }
        .feature-description {
            font-size: 0.95rem;
            line-height: 1.5;
            color: var(--text-color-light);
        }
        .section-title {
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            text-align: center;
            position: relative;
            padding-bottom: 0.8rem;
        }
        .section-title:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 3px;
            background-color: var(--primary-color);
            border-radius: 2px;
        }
        .workflow-diagram {
            margin: 2.5rem 0;
            text-align: center;
        }
        .workflow-diagram img {
            max-width: 100%;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        .second-architecture-image {
            margin-top: 30px;
            max-width: 100%;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        .workflow-caption {
            margin-top: 1rem;
            font-style: italic;
            color: var(--text-color-light);
        }
        .try-agent-section {
            background-color: var(--card-bg);
            border-radius: 10px;
            padding: 2rem;
            text-align: center;
            margin: 3rem 0;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }
        .try-agent-section h2 {
            margin-bottom: 1.2rem;
        }
        .try-agent-section p {
            margin-bottom: 2rem;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }
        .start-button {
            background-color: #1E88E5;
            color: white;
            border: none;
            padding: 0.9rem 2rem;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        .start-button i {
            margin-right: 0.7rem;
        }
        .start-button:hover {
            background-color: #1565C0;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(30, 136, 229, 0.3);
        }
        .technology-section {
            margin: 3rem 0;
        }
        .tech-list {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 1.5rem;
            margin: 2rem 0;
        }
        .tech-item {
            background-color: var(--card-bg);
            border-radius: 8px;
            padding: 1rem 1.5rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            display: flex;
            align-items: center;
            transition: transform 0.2s;
        }
        .tech-item:hover {
            transform: translateY(-3px);
        }
        .tech-icon {
            margin-right: 0.8rem;
            color: var(--primary-color);
            font-size: 1.3rem;
        }
        .implementation-details {
            background-color: var(--card-bg);
            border-radius: 10px;
            padding: 2rem;
            margin: 3rem 0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }
        .implementation-list {
            margin-top: 1.5rem;
            list-style-type: none;
            padding-left: 0;
        }
        .implementation-list li {
            margin-bottom: 1rem;
            padding-left: 1.8rem;
            position: relative;
        }
        .implementation-list li:before {
            content: '•';
            position: absolute;
            left: 0;
            color: var(--primary-color);
            font-size: 1.5rem;
            line-height: 1;
        }
        .highlight-features {
            margin: 3rem 0;
        }
        .highlight-list {
            list-style-type: none;
            padding-left: 0;
        }
        .highlight-list li {
            background-color: var(--card-bg);
            border-radius: 8px;
            padding: 1.2rem 1.5rem;
            margin-bottom: 1rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            display: flex;
            align-items: center;
        }
        .highlight-list li i {
            color: var(--primary-color);
            margin-right: 1rem;
            font-size: 1.2rem;
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 999;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.6);
            -webkit-backdrop-filter: blur(4px);
            backdrop-filter: blur(4px);
        }
        .modal-content {
            background-color: var(--background-color);
            margin: 10% auto;
            padding: 2rem;
            border-radius: 10px;
            width: 80%;
            max-width: 700px;
            box-shadow: 0 5px 30px rgba(0,0,0,0.3);
        }
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 1rem;
        }
        .modal-title {
            font-size: 1.5rem;
            margin: 0;
        }
        .close-modal {
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-color-light);
            transition: color 0.2s;
        }
        .close-modal:hover {
            color: var(--primary-color);
        }
        .chat-interface {
            height: 400px;
            border-radius: 8px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            border: 1px solid var(--border-color);
        }
        .chat-messages {
            flex: 1;
            padding: 1rem;
            overflow-y: auto;
            background-color: var(--card-bg);
        }
        .message {
            margin-bottom: 1rem;
            max-width: 80%;
        }
        .user-message {
            margin-left: auto;
            background-color: var(--primary-color);
            color: white;
            padding: 0.8rem 1rem;
            border-radius: 15px 15px 0 15px;
        }
        .bot-message {
            background-color: var(--border-color);
            padding: 0.8rem 1rem;
            border-radius: 15px 15px 15px 0;
        }
        .chat-input {
            display: flex;
            padding: 0.8rem;
            background-color: var(--background-color);
            border-top: 1px solid var(--border-color);
        }
        .chat-input input {
            flex: 1;
            padding: 0.7rem 1rem;
            border: 1px solid var(--border-color);
            border-radius: 20px;
            margin-right: 0.8rem;
            font-size: 0.95rem;
        }
        .chat-input button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .chat-input button:hover {
            background-color: #1565C0;
        }
        
        .return-to-portfolio {
            text-align: center;
            margin: 3rem 0 1rem;
        }
        
        .footer-copyright {
            text-align: center;
            margin-top: 2rem;
            color: var(--text-color-light);
            font-size: 0.9rem;
        }
        
        .project-tags {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 0.8rem;
            margin: 1.2rem 0;
        }
        
        @media (max-width: 768px) {
            .features-grid {
                grid-template-columns: 1fr;
            }
            .tech-list {
                gap: 1rem;
            }
            .tech-item {
                width: 100%;
            }
            .modal-content {
                width: 95%;
                margin: 20% auto;
            }
        }
        
        /* Media queries para dispositivos móviles y pantallas pequeñas */
        @media (max-width: 992px) {
            .first-row {
                flex-wrap: wrap;
            }
            
            .first-row .feature-card {
                flex: 0 0 calc(50% - 1rem);
                width: calc(50% - 1rem);
            }
        }
        
        @media (max-width: 768px) {
            .first-row {
                flex-direction: column;
            }
            
            .first-row .feature-card,
            .second-row .feature-card {
                flex: 0 0 100%;
                width: 100%;
                max-width: 100%;
            }
            
            .second-row {
                flex-direction: column;
                margin-top: 0;
            }
        }
        
        /* Estilos adicionales para mejorar la presentación del chat */
        /* Estilos globales para cualquier elemento dentro del chat */
        div[class*="n8n-chat-widget"] *,
        div[class*="n8n-chat"] *,
        #n8n-chat * {
            text-align: left !important;
        }
        
        /* Estilos para el contenedor principal del chat */
        div[class*="n8n-chat-widget-container"],
        div[class*="n8n-chat-widget-messages-container"],
        div[class*="n8n-chat-widget-window"],
        .n8n-chat-widget-window {
            background-color: #f8f9fc !important; /* Fondo suave para toda la ventana de chat */
            border-radius: 12px !important;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08) !important;
        }
        
        /* Contenedor personalizado para el chat con fondo estilizado */
        .chat-container {
            background-color: #f5f8ff;
            border-radius: 16px;
            padding: 25px;
            margin: 30px 0;
            box-shadow: 0 6px 24px rgba(0, 0, 0, 0.06);
            border: 1px solid rgba(79, 70, 229, 0.15);
            position: relative;
            overflow: visible;
        }
        
        /* Efecto decorativo para el contenedor */
        .chat-container:before {
            content: "";
            position: absolute;
            top: -15px;
            left: 50px;
            width: 30px;
            height: 30px;
            background-color: #f5f8ff;
            border-top: 1px solid rgba(79, 70, 229, 0.15);
            border-left: 1px solid rgba(79, 70, 229, 0.15);
            transform: rotate(45deg);
            z-index: -1;
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <nav class="navbar">
                <div class="logo"><a href="index.html">JR</a></div>
                <ul class="nav-links">
                    <li><a href="index.html#about">About</a></li>
                    <li><a href="index.html#projects">Projects</a></li>
                    <li><a href="index.html#contact">Contact</a></li>
                </ul>
                <div class="theme-toggle">
                    <i class="fas fa-moon"></i>
                </div>
                <div class="menu-btn">
                    <span></span>
                </div>
            </nav>
        </div>
    </header>

    <main class="project-container">
        <!-- Return Link -->
        <a href="index.html" class="return-link">
            <i class="fas fa-arrow-left"></i> Back to Portfolio
        </a>

        <!-- Project Header -->
        <div class="project-header">
            <a href="index.html" class="return-link">
                <i class="fas fa-arrow-left"></i> Back to Portfolio
            </a>
            <h1>Airbnb Travel Agent AI</h1>
            <div class="project-tags" style="justify-content: center; margin-top: 1rem;">
                <span>OpenRouter</span>
                <span>n8n Workflow</span>
                <span>MCP Tools</span>
                <span>AI Integration</span>
                <span>Travel AI</span>
                <span>LLM</span>
                <span>Airbnb</span>
                <span>Agent Architecture</span>
            </div>
            <p class="project-description">
                This AI-powered travel assistant leverages OpenRouter's language models and integrates with MCP's 
                Airbnb tools to deliver intelligent, context-aware travel recommendations. Built using n8n's visual 
                workflow automation, this agent interacts in real-time with users, understands their travel needs, and 
                utilizes Airbnb tools to search and deliver results dynamically.
            </p>
        </div>

        <!-- Key Capabilities -->
        <section class="features-container">
            <h2 class="section-title">🔍 Key Capabilities</h2>
            
            <!-- Primera fila con 3 elementos -->
            <div class="first-row">
                <div class="feature-card">
                    <div class="feature-icon">💬</div>
                    <h3 class="feature-title">Contextual Memory</h3>
                    <p class="feature-description">
                        Stores conversation history to provide continuity across multi-turn interactions.
                    </p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">🔧</div>
                    <h3 class="feature-title">Tool-Oriented Reasoning</h3>
                    <p class="feature-description">
                        Uses a structured reasoning process: first listing available Airbnb tools, then selecting and executing the right one.
                    </p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">🧠</div>
                    <h3 class="feature-title">Natural Language Understanding</h3>
                    <p class="feature-description">
                        Interprets casual language, preferences, and specific travel requirements naturally and accurately.
                    </p>
                </div>
            </div>
            
            <!-- Segunda fila con 2 elementos centrados -->
            <div class="second-row">
                <div class="feature-card">
                    <div class="feature-icon">🔁</div>
                    <h3 class="feature-title">Workflow Orchestration</h3>
                    <p class="feature-description">
                        Automates complex interaction steps within n8n to streamline input processing, tool invocation, and response delivery.
                    </p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">🧳</div>
                    <h3 class="feature-title">Travel-Specific Intelligence</h3>
                    <p class="feature-description">
                        Optimized for travel planning scenarios, such as listing accommodations, availability checks, and personalized travel options.
                    </p>
                </div>
            </div>
        </section>

        <!-- System Architecture -->
        <section class="workflow-diagram">
            <h2 class="section-title">🧩 System Architecture</h2>
            <img src="./img/JRagent02.jpg" alt="Airbnb Travel Agent Interface" class="img-fluid" style="max-width: 100%; display: block; margin: 0 auto; border-radius: 8px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);">
            <p class="workflow-caption">Travel Agent interface showing tool selection and Airbnb integration</p>
        </section>

        <!-- Try the Travel Agent -->
        <section class="try-agent-section">
            <h2>💬 Try the Travel Agent</h2>
            <p>
                Click the button below to activate the travel planning chat. You can ask about accommodations, destinations,
                travel preferences, or specific Airbnb listings, and watch as the AI agent searches and recommends options in real time.
            </p>
            <!-- Contenedor con fondo estilizado para el chat -->
            <div class="chat-container">
                <button id="activate-chat" class="start-button">
                    <i class="fas fa-comments"></i> Activate Travel Agent
                </button>
                <div id="n8n-chat"></div>
            </div>
        </section>

        <!-- Technologies -->
        <section class="technology-section">
            <h2 class="section-title">🔧 Technologies</h2>
            <div class="tech-list">
                <div class="tech-item">
                    <i class="fas fa-network-wired tech-icon"></i>
                    <span>n8n Cloud for orchestration</span>
                </div>
                <div class="tech-item">
                    <i class="fas fa-brain tech-icon"></i>
                    <span>OpenRouter Chat Models</span>
                </div>
                <div class="tech-item">
                    <i class="fas fa-tools tech-icon"></i>
                    <span>MCP Airbnb Tools</span>
                </div>
                <div class="tech-item">
                    <i class="fas fa-code tech-icon"></i>
                    <span>Webhooks & JavaScript</span>
                </div>
                <div class="tech-item">
                    <i class="fas fa-memory tech-icon"></i>
                    <span>Memory Buffers</span>
                </div>
            </div>
        </section>

        <!-- Implementation Details -->
        <section class="implementation-details">
            <h2 class="section-title">⚙️ Implementation Details</h2>
            <p>Key technical aspects of this project include:</p>
            <ul class="implementation-list">
                <li>Conversation management using memory buffers</li>
                <li>Tool invocation via LangChain's agent logic</li>
                <li>Airbnb-specific tool listing and execution with MCP APIs</li>
                <li>Dynamic prompt definition with system instructions</li>
                <li>Seamless n8n node integration</li>
                <li>Error handling and robust fallback strategies</li>
            </ul>
        </section>

        <!-- Highlight Features -->
        <section class="highlight-features">
            <h2 class="section-title">🌟 Highlight Features</h2>
            <p>The Airbnb Travel Agent includes the following intelligent capabilities:</p>
            <ul class="highlight-list">
                <li>
                    <i class="fas fa-arrow-right"></i>
                    <span><strong>Tool Reasoning Flow:</strong> Always begins by listing tools and selecting the most appropriate one.</span>
                </li>
                <li>
                    <i class="fas fa-arrow-right"></i>
                    <span><strong>Natural Language Understanding:</strong> Interprets nuanced travel queries.</span>
                </li>
                <li>
                    <i class="fas fa-arrow-right"></i>
                    <span><strong>Memory-Enabled Chat:</strong> Maintains context through extended chats.</span>
                </li>
                <li>
                    <i class="fas fa-arrow-right"></i>
                    <span><strong>Real-Time Tool Execution:</strong> Executes Airbnb tools on demand.</span>
                </li>
                <li>
                    <i class="fas fa-arrow-right"></i>
                    <span><strong>n8n Workflow Automation:</strong> Handles logic, memory, and tool sequencing automatically.</span>
                </li>
            </ul>
        </section>

        <!-- Call to Action -->
        <section class="call-to-action">
            <h3>Interested in a personalized automation ecosystem?</h3>
            <p>Let's connect to discuss how this automation ecosystem can be customized for your team or organization.</p>
            <div>
                <a href="https://linkedin.com/in/jarondonp" class="social-btn" target="_blank" rel="noopener">
                    <i class="fab fa-linkedin"></i> Connect on LinkedIn
                </a>
                <a href="mailto:info@javierrondon.com" class="social-btn">
                    <i class="fas fa-envelope"></i> Send Email
                </a>
            </div>
        </section>

        <!-- Project Actions -->
        <div class="project-actions">
            <a href="https://github.com/jarondonp/portafolio" class="btn btn-primary" target="_blank" rel="noopener">
                <i class="fab fa-github"></i> View on GitHub
            </a>
            <a href="index.html" class="btn btn-outline">
                <i class="fas fa-arrow-left"></i> Return to Portfolio
            </a>
        </div>

        <!-- Footer -->
        <footer class="footer-copyright">
            &copy; 2025 Javier Rondón. All rights reserved.
        </footer>
    </main>

    <script type="module">
        import { createChat } from 'https://cdn.jsdelivr.net/npm/@n8n/chat/dist/chat.bundle.es.js';
        
        // Configure chat options
        const chatOptions = {
            webhookUrl: 'https://primary-production-28e57.up.railway.app/webhook/f72367c6-42e7-4c01-a4e9-dd524bd01cc8/chat',
            mode: 'window',
            showWelcomeScreen: true,
            autoShow: true,
            initialMessages: [
                'Hello! 👋',
                'I\'m your Airbnb Travel Assistant. How can I help with your travel plans today?'
            ],
            i18n: {
                en: {
                    title: 'Airbnb Travel Agent',
                    subtitle: 'Ask me about accommodations, destinations, or travel recommendations.',
                    footer: 'Powered by n8n',
                    getStarted: 'Start Planning Your Trip',
                    inputPlaceholder: 'Ask about travel options...',
                }
            },
            window: {
                width: '420px', // Aumentado ligeramente para mejor legibilidad
                height: '600px',
                inputHeight: '60px',
                buttonSize: '50px',
                backgroundColor: '#f5f8ff', // Color de fondo para la ventana
                borderRadius: '12px'
            },
            styles: {
                fontFamily: 'Poppins, sans-serif',
                fontSize: '16px',
                backgroundColor: '#f5f8ff', // Color de fondo para el contenido
                getStartedButton: {
                    backgroundColor: 'var(--primary-color)',
                    color: 'white',
                    fontSize: '16px',
                    padding: '12px 20px',
                    borderRadius: '6px', 
                    fontWeight: '500'
                },
                input: {
                    height: '60px',
                    fontSize: '16px',
                    padding: '12px 15px'
                }
            },
            messageHandler: {
                // Esta función se ejecuta antes de mostrar cada mensaje
                // Permite formatear mejor los mensajes y manejar correctamente los enlaces
                onMessageProcessed: (message) => {
                    // Asegurarse de que el mensaje tenga un formato adecuado
                    if (message.text) {
                        // Formatear listas y elementos numerados correctamente
                        message.text = message.text
                            .replace(/(\d+\.\s)/g, '<br>$1')
                            .replace(/(\n\s*\-\s)/g, '<br>• ')
                            .replace(/(\n)/g, '<br>');
                        
                        // Si el mensaje contiene enlaces, asegurarse de que sean visualizados correctamente
                        if (message.text.includes('Ver Anuncio') || message.text.includes('este enlace')) {
                            message.text = message.text.replace(/Ver Anuncio/g, '<em>Demo: Ver información del alojamiento</em>');
                            message.text = message.text.replace(/este enlace/g, '<em>más opciones disponibles</em>');
                        }
                    }
                    return message;
                }
            }
        };
        
        // Initialize the chat widget when the button is clicked
        document.getElementById('activate-chat').addEventListener('click', function() {
            // Create the chat instance
            const chat = createChat(chatOptions);
            if (chat && typeof chat.open === 'function') {
                setTimeout(() => chat.open(), 200);
            }
            
            // This only creates the widget once
            this.disabled = true;
            this.textContent = 'Travel Agent Activated';
            this.style.backgroundColor = '#4CAF50';
            
            // Add instructional text below the button
            const instructionText = document.createElement('p');
            instructionText.innerHTML = '<strong>The travel agent is ready!</strong> <span style="color:#333">Click the chat bubble at the bottom left to start planning your trip.</span>';
            instructionText.style.color = '#4CAF50';
            instructionText.style.marginTop = '10px';
            instructionText.style.fontSize = '1.07rem';
            this.parentNode.insertBefore(instructionText, document.getElementById('n8n-chat'));
        });
    </script>
</body>
</html>
